(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[180],{369:(e,t,s)=>{"use strict";s.d(t,{A:()=>a}),s(7876);var r=s(4232);s(698);let a=(0,r.createContext)()},481:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(7876),a=s(4232),n=s(1603),o=s(698),c=s(369);let l=()=>{let[e,t]=(0,a.useState)(!0),[s,l]=(0,a.useState)(null),i=(0,n.Zp)(),{setUser:u}=(0,a.useContext)(c.A);return((0,a.useEffect)(()=>{(async()=>{try{let e=new URLSearchParams(window.location.search).get("session_id");if(!e)throw Error("session_id がありません");await o.A.post("/confirm-subscription/",{session_id:e});let s=(await o.A.get("/auth/user/")).data;if(u(s),"premium"===s.plan)t(!1),setTimeout(()=>i("/mypage"),5e3);else throw Error("プラン更新が確認できませんでした。")}catch(e){console.error(e),l("プラン更新に失敗しました。少し待ってから再度お試しください。"),t(!1)}})()},[i,u]),e)?(0,r.jsx)("div",{className:"container mx-auto px-4 py-12 text-center",children:(0,r.jsx)("p",{className:"text-lg",children:"アップグレード完了を確認中…"})}):s?(0,r.jsxs)("div",{className:"container mx-auto px-4 py-12 text-center",children:[(0,r.jsx)("p",{className:"text-red-500 mb-4",children:s}),(0,r.jsx)("button",{onClick:()=>i("/upgrade"),className:"bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded",children:"再度アップグレード画面へ"})]}):(0,r.jsxs)("div",{className:"container mx-auto px-4 py-12 text-center",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold mb-4 text-green-600",children:"アップグレード完了！"}),(0,r.jsxs)("p",{className:"text-lg text-gray-700 mb-8",children:["プレミアムプランへの切り替えが完了しました。",(0,r.jsx)("br",{}),"5秒後にマイページへ移動します…"]}),(0,r.jsx)("button",{onClick:()=>i("/mypage"),className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg",children:"今すぐマイページへ"})]})}},698:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let r=s(1040).A.create({baseURL:"http://127.0.0.1:8000/api",timeout:5e3,headers:{"Content-Type":"application/json",accept:"application/json"}});r.interceptors.request.use(e=>{let t=localStorage.getItem("authTokens")?JSON.parse(localStorage.getItem("authTokens")):null;return t&&(e.headers.Authorization=`Bearer ${t.access}`),e},e=>Promise.reject(e));let a=r},8235:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/UpgradeSuccessPage",function(){return s(481)}])},9609:(e,t)=>{"use strict";Object.prototype.toString}},e=>{var t=t=>e(e.s=t);e.O(0,[593,230,40,636,792],()=>t(8235)),_N_E=e.O()}]);