(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[860],{369:(e,t,a)=>{"use strict";a.d(t,{A:()=>s}),a(7876);var r=a(4232);a(698);let s=(0,r.createContext)()},698:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let r=a(1040).A.create({baseURL:"http://127.0.0.1:8000/api",timeout:5e3,headers:{"Content-Type":"application/json",accept:"application/json"}});r.interceptors.request.use(e=>{let t=localStorage.getItem("authTokens")?JSON.parse(localStorage.getItem("authTokens")):null;return t&&(e.headers.Authorization=`Bearer ${t.access}`),e},e=>Promise.reject(e));let s=r},5035:()=>{throw Error("Module build failed: Error: Final loader (../../node_modules/next/dist/build/webpack/loaders/error-loader.js) didn't return a Buffer or String\n    at processResult (/Users/ryota/node_modules/next/dist/compiled/webpack/bundle5.js:29:407369)\n    at /Users/ryota/node_modules/next/dist/compiled/webpack/bundle5.js:29:408906\n    at /Users/ryota/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js:1:8727\n    at iterateNormalLoaders (/Users/ryota/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js:1:5565)\n    at iterateNormalLoaders (/Users/ryota/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js:1:5650)\n    at /Users/ryota/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js:1:5879\n    at runSyncOrAsync (/Users/ryota/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js:1:4185)\n    at iterateNormalLoaders (/Users/ryota/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js:1:5782)\n    at /Users/ryota/node_modules/next/dist/compiled/loader-runner/LoaderRunner.js:1:5426\n    at /Users/ryota/node_modules/next/dist/compiled/webpack/bundle5.js:29:408396")},5149:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(7876),s=a(4232),l=a(1603),n=a(698),o=a(369);a(5035);let d=[{name:"味噌カツ",url:"https://thumb.photo-ac.com/fc/fc8a7c0165a79d4d71037ed1ced8a9b7_w.jpeg"},{name:"親子丼",url:"https://www.tabemaro.jp/wp-content/uploads/2023/11/2311_nagoyako-chinoyakodon.jpg"},{name:"天むす",url:"https://thumb.photo-ac.com/b0/b0decda91029e5f8655de4ad81c0929f_w.jpeg"},{name:"あんかけスパ",url:"https://www.tabemaro.jp/wp-content/uploads/2023/03/ankakesupagettei-1.jpg"}],c=e=>{let{restaurant:t}=e;return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-1 transition-all duration-300 flex flex-col",children:[(0,r.jsx)("img",{src:t.image||"https://placehold.co/600x400/F0AD4E/FFFFFF?text=NAGOYAMESHI",alt:t.name,className:"w-full h-48 object-cover"}),(0,r.jsxs)("div",{className:"p-4 flex flex-col flex-grow",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:t.name}),(0,r.jsx)("p",{className:"text-gray-600 mt-1 flex-grow",children:t.description}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["カテゴリ: ",t.category_name||"未分類"]}),(0,r.jsxs)("p",{className:"text-sm text-yellow-500",children:["平均評価: ",t.avg_rating?Number(t.avg_rating).toFixed(1):"評価なし"]}),(0,r.jsx)("div",{className:"text-right mt-4",children:(0,r.jsx)(l.N_,{to:`/restaurants/${t.id}`,className:"text-yellow-500 hover:text-yellow-600 font-bold",children:"詳しく見る"})})]})]})},i=()=>{let{user:e}=(0,s.useContext)(o.A),[t,a]=(0,s.useState)(0),[l,i]=(0,s.useState)([]),[u,m]=(0,s.useState)([]),[x,p]=(0,s.useState)(""),[h,g]=(0,s.useState)(""),[j,b]=(0,s.useState)("");(0,s.useEffect)(()=>{let e=setInterval(()=>{a(e=>(e+1)%d.length)},5e3);return()=>clearInterval(e)},[]);let w=(0,s.useCallback)(async()=>{try{let e=await n.A.get("/restaurants/",{params:{search:x,category:h,ordering:j}});i(e.data)}catch(e){console.error("店舗情報の取得に失敗しました",e)}},[x,h,j]);return(0,s.useEffect)(()=>{(async()=>{try{let e=await n.A.get("/categories/");m(e.data)}catch(e){console.error("カテゴリの取得に失敗しました",e)}})()},[]),(0,s.useEffect)(()=>{w()},[w]),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"carousel-container",children:[d.map((e,a)=>(0,r.jsx)("div",{className:`carousel-slide ${a===t?"active":""}`,style:{backgroundImage:`url(${e.url})`}},e.name)),(0,r.jsxs)("div",{className:"carousel-content",children:[(0,r.jsx)("h1",{className:"text-5xl md:text-6xl font-extrabold mb-4",children:"名古屋ならではの味を、見つけよう"}),e?(0,r.jsxs)("p",{className:"text-xl md:text-2xl mb-8",children:["ようこそ, ",e.username,"さん！"]}):(0,r.jsx)("p",{className:"text-xl md:text-2xl mb-8",children:"NAGOYAMESHIは、名古屋市のB級グルメ専門のレビューサイトです。"})]})]}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-12",children:[(0,r.jsx)("h2",{className:"text-4xl font-bold text-center mb-8",children:"店舗を探す"}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md mb-8 flex flex-wrap items-center gap-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"キーワードで検索...",value:x,onChange:e=>p(e.target.value),className:"border p-2 rounded-md flex-grow"}),(0,r.jsxs)("select",{value:h,onChange:e=>g(e.target.value),className:"border p-2 rounded-md bg-white",children:[(0,r.jsx)("option",{value:"",children:"すべてのカテゴリ"}),u.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,r.jsxs)("select",{value:j,onChange:e=>b(e.target.value),className:"border p-2 rounded-md bg-white",children:[(0,r.jsx)("option",{value:"",children:"標準"}),(0,r.jsx)("option",{value:"-avg_rating",children:"評価の高い順"}),(0,r.jsx)("option",{value:"avg_rating",children:"評価の低い順"})]})]}),(0,r.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:l.map(e=>(0,r.jsx)(c,{restaurant:e},e.id))})]})]})}},7659:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/HomePage",function(){return a(5149)}])},9609:(e,t)=>{"use strict";Object.prototype.toString}},e=>{var t=t=>e(e.s=t);e.O(0,[593,230,40,636,792],()=>t(7659)),_N_E=e.O()}]);