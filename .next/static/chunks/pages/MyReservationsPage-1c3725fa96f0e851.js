(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[394],{698:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let a=s(1040).A.create({baseURL:"http://127.0.0.1:8000/api",timeout:5e3,headers:{"Content-Type":"application/json",accept:"application/json"}});a.interceptors.request.use(e=>{let t=localStorage.getItem("authTokens")?JSON.parse(localStorage.getItem("authTokens")):null;return t&&(e.headers.Authorization=`Bearer ${t.access}`),e},e=>Promise.reject(e));let r=a},3419:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(7876),r=s(4232),n=s(698),l=s(1603);let i=()=>{let[e,t]=(0,r.useState)([]),s=(0,l.Zp)(),i=(0,r.useCallback)(async()=>{try{let e=await n.A.get("/reservations/");t(e.data)}catch(e){console.error("予約情報の取得に失敗しました",e)}},[]);(0,r.useEffect)(()=>{i()},[i]);let o=async e=>{if(window.confirm("この予約をキャンセルしますか？"))try{await n.A.delete(`/reservations/${e}/`),i()}catch(e){console.error("予約のキャンセルに失敗しました",e),alert("予約のキャンセルに失敗しました。")}};return(0,a.jsxs)("div",{className:"container mx-auto px-4 py-12",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-center mb-8",children:"予約一覧"}),e.length>0?(0,a.jsx)("div",{className:"space-y-4 max-w-2xl mx-auto",children:e.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:e.restaurant_name}),(0,a.jsxs)("p",{className:"text-gray-600 mt-2",children:["日時: ",e.reservation_date," ",e.reservation_time.slice(0,5)]}),(0,a.jsxs)("p",{className:"text-gray-600",children:["人数: ",e.number_of_people," 名"]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>o(e.id),className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300",children:"キャンセル"}),(0,a.jsx)("button",{onClick:()=>s(`/restaurants/${e.restaurant}`),className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition duration-300",children:"詳細"})]})]},e.id))}):(0,a.jsx)("p",{className:"text-center text-gray-500",children:"現在、予約はありません。"})]})}},3976:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/MyReservationsPage",function(){return s(3419)}])},9609:(e,t)=>{"use strict";Object.prototype.toString}},e=>{var t=t=>e(e.s=t);e.O(0,[593,230,40,636,792],()=>t(3976)),_N_E=e.O()}]);